stages:
  - build
  - test
  - deploy

buildBackend:
  stage: build
  image: microsoft/dotnet:latest
  variables:
    build_path: "Backend"
  script:
    - "cd $build_path"
    - "dotnet restore"
    - "dotnet build"

buildFrontend:
  stage: build
  image: node:9.11.1
  variables:
    build_path: "Frontend-React"
  script:
    - "cd $build_path"
    - "npm install"
    - "npm run build"

testBackend:
  stage: test
  image: microsoft/dotnet:latest
  variables:
    test_path: "Backend/Backend.Tests"
  script:
    - "cd $test_path"
    - "dotnet test"

testFrontend:
  stage: build
  image: node:9.11.1
  variables:
    build_path: "Frontend-React"
  script:
    - "cd $build_path"
    - "npm install"
    - "npm test"

# deploy:
#   stage: deploy:
#   image: docker:latest
#   script:
#     - ""